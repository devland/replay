<html>
 <head>
  <script>
let proxyUrl=new URL("http://127.0.0.1:8080/");
let target, frame, framePath;
const tunnel=(url)=>
{
 if (!url) return "";
 if (url.includes(proxyUrl.href)) url=url.substring(proxyUrl.href.length);
 let targetUrl;
 try
 {
  targetUrl=new URL(url);
 }
 catch(error)
 {
  targetUrl=new URL(url, framePath.origin);
 }
 url=targetUrl.href;
 return proxyUrl.href+url;
}
const loadTarget=(xhttp)=>
{
 frame.src=`${proxyUrl.href}${target.value}/`;
}
window.addEventListener("load", (event)=>
{
 target=document.getElementById("targetHref");
 frame=document.getElementById("frame");
 frame.addEventListener("load", (event)=>
 {
  framePath=new URL(frame.contentWindow.location.href.substring(proxyUrl.href.length));
  frame.contentDocument.addEventListener("click", (event)=>
  {
   let link=event.target.closest("a");
   let form=event.target.closest("form");
   if (link && link.href)
   {
    link.href=tunnel(link.href);
    link.target="_self";
   }
   if (form) form.action=tunnel(form.getAttribute("action"));
  });
 });
});
  </script>
 </head>
 <body>
  <input type="text" id="targetHref" placeholder="website url" value="http://devana.eu">
  <button type="button" onclick="loadTarget()">Change Content</button>
  <div>
   <iframe id="frame" style="width: 100vw; height: 90vh;"></iframe>
  </div>
 </body>
</html>
