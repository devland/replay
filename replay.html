<html>
 <head>
  <script>
let proxyUrl=new URL("http://127.0.0.1:8080/");
let target, frame, framePath;
let encode=(value)=>
{
 return encodeURIComponent(JSON.stringify({url: value}));
}
const tunnel=(url)=>
{
 if (url.includes(proxyUrl.href)) url=url.substring(proxyUrl.href.length);
 if (url.includes(framePath)) url=url.substring(framePath.length);
 return proxyUrl.href+encode(url);
}
const loadTarget=(xhttp)=>
{
 frame.src=`${proxyUrl.href}${encode(target.value)}`;
}
window.addEventListener("load", (event)=>
{
 target=document.getElementById("targetHref");
 frame=document.getElementById("frame");
 frame.addEventListener("load", (event)=>
 {
  framePath=frame.contentWindow.location.href.substring(proxyUrl.href.length);
  for (let i=0; i<frame.contentDocument.links.length; i++)
  {
   let url=frame.contentDocument.links[i];
   url.href=tunnel(url.href);
  }
  for (let i=0; i<frame.contentDocument.forms.length; i++)
  {
   let form=frame.contentDocument.forms[i];
   form.action=tunnel(form.getAttribute("action"));
  }
 });
});
  </script>
 </head>
 <body>
  <input type="text" id="targetHref" placeholder="website url" value="http://miscwalls.net">
  <button type="button" onclick="loadTarget()">Change Content</button>
  <div>
   <iframe id="frame" style="width: 100vw; height: 90vh;"></iframe>
  </div>
 </body>
</html>
